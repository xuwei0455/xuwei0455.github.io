---
title: DDD的一些概念
date: 2019-04-10 10:46:45
tags:
	- DDD
categories:
---

DDD（Domain-Driven Design，领域驱动设计）是一种软件的设计方法，最近因为工作上
的需要，为了能设计出更清晰、更合理的软件结构，读了一些网上关于DDD的文章，但发现
一些概念理解起来比较的困难。

一番搜索后发现了一篇阿里盒马架构总监——张群辉——的[技术文章](https://www.infoq.cn/article/alibaba-freshhema-ddd-practice)，
对我理解DDD的一些概念有很大的帮助，这里写一下我个人认为难以理解，或者容易产生误区
的一些概念理解。


### Data Modeling && Object Modeling

在大多数人的设计方案里，其实只有Data Modeling这一种设计方案，其实这个可以从程序的
发展历史上找到一些原因，但很显然我的水平还没到这个地步，暂时留个坑，以后慢慢填..

那么现在来说什么是Data Modeling, 什么是Object Modeling。

我其实更喜欢称呼为面向模型(Model-Oriented)，面向对象(Object-Oriented)的设计方法。

面向模型就是我们熟悉的先设计存储结构，然后根据存储结构映射为类的设计，最后基于此完成
整个程序的设计。

面向对象是先有业务，有分清楚不同的业务之间的实例是什么，根据这些划分好各自的域，然后
再去设计存储。

套用耶稣的一句话就是

> 让凯撒的归凯撒，让上帝的归上帝

即程序中的类负责处理好业务的逻辑，而Model就只是纯粹的存储。

也可以理解为面向对象是从上至下的设计方法，而面向模型是从下至上的设计方法。

个人认为从上至下的设计方法的好处是让业务更清晰，更加趋向于世界本来的样子，而不是
基于程序员的思路。

### 领域模型：失血、贫血、充血

这里不具体讨论各个模型是什么样的，具体可以参考群辉大神的[文章](https://www.infoq.cn/article/alibaba-freshhema-ddd-practice)，
里面已经写得非常的好了。

这些名词其实是对Object的设计方案的一个描述，这个是建立在面向对象的基础上的。

主要就是考虑怎么样去设计一个类，使它能够更加清楚的表达业务，同时从程序员的角度来讲，
更容易一眼就明白这东西是怎么工作的。

所以群辉大神从以下三个角度来进行了分析：
1. 类的表达力，是否除了拥有本身的数据外，是否可以表达行为，是否可以表达与其他类的关系
2. 如何使用语言特性写出清晰的类，依赖注入解决与依赖类的耦合，工厂模式实例化时无法直接注入依赖
3. 测试的友好程度，没有持久化的类对测试友好，有持久化的类可以显示表达依赖，方便Mock

### DDD的使用范围

> 没有银弹

讨论使用范围的原因很简单，就是因为软件领域里面没有能够一劳永逸的方法。

DDD也是如此，领域模型是为了解决业务的复杂性和边界的。防止业务代码爆炸式的增长——就像
添加了高效的发泡剂一般。

由于按DDD的设计思路，并不会考虑数据的存储效率，因为其实可以认为DDD就是在忽略持久化
存储的情况下设计出来的，所以除了get_by_id这一类的查询，其他的复杂查询并不适用于
DDD。

至于复杂的查询应该怎么去做（群辉大神推荐直接绕过domain，这当然是个方法，但我觉得
这里应该是个大坑，大有可写..），同理，挖个坑先..
